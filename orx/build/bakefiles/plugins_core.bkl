<?xml version="1.0"?>
<bakefile>

  <!-- Since on linux, FMOD packaging is not good, we are obliged to use this trick :/ -->
  <set var="orxFMODLIB_WIN">
    <if cond="PLATFORM_WIN32=='1'">fmod</if>
  </set>

  <set var="orxFMODLIB_UNIX">
    <if cond="PLATFORM_UNIX=='1'">/usr/lib/libfmod.so</if>
  </set>

  <!-- Define the module template -->
  <template id="orxFMOD">
    <sys-lib>$(orxFMODLIB_WIN)</sys-lib>
    <ldflags>$(orxFMODLIB_UNIX)</ldflags>
  </template>
  
  <!-- On windows, sdl-config is not available, so we have to specify the option manually -->
  <set var="orxSDLLIB_WIN">
    <if cond="PLATFORM_WIN32=='1'">SDL</if>
  </set>

  <set var="orxFMODCFLAGS_UNIX">
    <if cond="PLATFORM_UNIX=='1'">`sdl-config --cflags`</if>
  </set>
  <set var="orxFMODLIB_UNIX">
    <if cond="PLATFORM_UNIX=='1'">`sdl-config --libs`</if>
  </set>

  <!-- Define the module template -->
  <template id="orxSDL">
    <cflags>$(orxFMODCFLAGS_UNIX)</cflags>
    <sys-lib>$(orxSDLLIB_WIN)</sys-lib>
    <ldflags>$(orxFMODLIB_UNIX)</ldflags>
  </template>
  

  <!--- Create orx core plugins -->
  <!-- DISPLAY -->

  <!-- SOUND -->

	  <!-- Depends on fmod -->
	  <module id="Sound_Fmod" cond="USE_FMOD=='1' and USE_PLUGINS=='1'" template="orxBASE,orxLINK,orxMODULELINK,orxFMOD">
	    <dirname>bin/plugins/core/sound</dirname>
	    <sources>plugins/Sound/Fmod/orxSound.c</sources>
	  </module>


  <!-- MOUSE -->

	  <!-- Depends on allegro -->
	  <module id="Mouse_Allegro" cond="USE_ALLEGRO=='1' and USE_PLUGINS=='1'" template="orxBASE,orxLINK,orxMODULELINK">
	    <dirname>bin/plugins/core/mouse</dirname>
	    <sources>plugins/Mouse/Allegro/orxMouse.c</sources>
	  </module>

  <!-- KEYBOARD -->

	  <!-- Depends on allegro -->
	  <module id="Keyboard_Allegro" cond="USE_ALLEGRO=='1' and USE_PLUGINS=='1'" template="orxBASE,orxLINK,orxMODULELINK">
	    <dirname>bin/plugins/core/keyboard</dirname>
	    <sources>plugins/Keyboard/Allegro/orxKeyboard.c</sources>
	  </module>

  <!-- JOYSTICK -->

	  <!-- Depends on nothing -->
	  <module id="Joystick_NONE" cond="USE_PLUGINS=='1'" template="orxBASE,orxLINK,orxMODULELINK">
	    <dirname>bin/plugins/core/joystick</dirname>
	    <sources>plugins/Joystick/NONE/orxJoystick.c</sources>
	  </module>
  
  <!-- FILE -->
  
  <!-- FILE_SYSTEM -->

  <!-- PACKAGE -->

  <!-- TIME -->

	  <!-- Depends on SDL -->
	  <module id="Time_SDL" cond="USE_SDL=='1' and USE_PLUGINS=='1'" template="orxBASE,orxLINK,orxMODULELINK,orxSDL">
	    <dirname>bin/plugins/core/time</dirname>
	    <sources>plugins/Time/SDL/orxTime.c</sources>
	  </module>

</bakefile>
