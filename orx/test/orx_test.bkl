<?xml version="1.0"?>
<bakefile>

  <!-- Platform is detected by Bakefile... according to it's value, set Link FLAGS variable -->
  <set var="orxLINKFLAG">
    <if cond="PLATFORM_UNIX=='1'">-rdynamic</if>
    <if cond="PLATFORM_WIN32=='1'"></if>
  </set>

  <set var="orxLINKLIB">
    <if cond="PLATFORM_UNIX=='1'">dl</if>
    <if cond="PLATFORM_WIN32=='1'"></if>
  </set>

  <!--- Create orx test dynamic library -->
  
  <dll id="memory" template="orxBASE">
    <dirname>bin/modules</dirname>
    <depends>orx</depends>
    <library>orx</library>
    <sources>test/orxTest_Memory.c</sources>
  </dll>

  <dll id="bank" template="orxBASE">
    <depends>orx</depends>
    <library>orx</library>
    <dirname>bin/modules</dirname>
    <sources>test/orxTest_Bank.c</sources>
  </dll>

  <!--- Create main program -->
  <exe id="testbed" template="orxBASE">
    <depends>orx</depends>
    <library>orx</library>
    <dirname>bin</dirname>
    <app-type>console</app-type> <!-- Windows specific : gui/console change the link behaviour -->

    <sys-lib>$(orxLINKLIB)</sys-lib>
    <ldflags>$(orxLINKFLAG)</ldflags>
    <sources>test/orxTest_Main.c</sources>
  </exe>

</bakefile>
