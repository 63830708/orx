<?xml version="1.0"?>
<bakefile>

  <include file="../orx_libcommon.bkl"/>

  <!-- Platform is detected by Bakefile... according to it's value, set Link FLAGS variable -->
  <set var="orxLINKFLAG">
    <if cond="PLATFORM_UNIX=='1'">-rdynamic</if>
    <if cond="PLATFORM_WIN32=='1'"></if>
  </set>

  <!--- Create orx test dynamic library -->
  
  <dll id="memory">
    <include>../include</include>
    <cflags>$(orxPLATFORM) $(orxDEBUG)</cflags>
    <sources>orxTest_Memory.c</sources>
  </dll>

  <dll id="bank">
    <include>../include</include>
    <cflags>$(orxPLATFORM) $(orxDEBUG)</cflags>
    <sources>orxTest_Bank.c</sources>
  </dll>

  <!--- Create main program -->
  <exe id="main">
    <include>../include</include>
    <app-type>console</app-type> <!-- Windows specific : gui/console change the link behaviour -->
    <lib-path>../lib</lib-path>
    <sys-lib>$(orxLIBNAME)</sys-lib>
    <sys-lib>dl</sys-lib>
    <cflags>$(orxPLATFORM) $(orxDEBUG)</cflags>
    <ldflags>$(orxLINKFLAG)</ldflags>
    <sources>orxTest_Main.c</sources>
  </exe>
  
</bakefile>
